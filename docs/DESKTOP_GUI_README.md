# KK缠论量化分析桌面GUI应用

## 概述

这是一个基于PyQt6开发的缠论分析桌面应用程序，直接集成缠论分析引擎，无需FastAPI接口，提供完整的桌面化缠论分析体验。

## 功能特性

### 🎯 核心功能
- **完整缠论分析**: 分型、笔、线段、中枢识别
- **多周期分析**: 支持5分钟、30分钟、日线等多个时间周期
- **交易信号检测**: 一类、二类、三类买卖点识别
- **实时分析**: 本地化分析，响应速度快
- **可视化展示**: 直观的表格和文本展示分析结果

### 🖥️ 界面特性
- **现代化UI**: 基于PyQt6的现代化界面设计
- **多标签页**: 分析概览、缠论结构、交易信号、分析日志
- **实时进度**: 分析进度实时显示
- **错误处理**: 完善的错误提示和日志记录

## 安装要求

### 系统要求
- Python 3.8+
- macOS / Windows / Linux

### 依赖包
```bash
# 核心GUI框架
PyQt6>=6.4.0
PyQt6-tools>=6.4.0

# 数据处理
pandas>=1.5.0
numpy>=1.21.0

# 数据库
pymongo>=4.0.0

# 其他依赖（已在requirements.txt中）
```

## 快速开始

### 1. 安装依赖
```bash
# 进入项目目录
cd /Users/libing/kk_Projects/kk_Stock/kk_chan

# 安装所有依赖
pip install -r requirements.txt
```

### 2. 启动应用
```bash
# 方法1: 使用启动脚本（推荐）
python run_desktop_gui.py

# 方法2: 直接运行GUI模块
python desktop_gui/main.py
```

### 3. 使用应用

1. **输入股票代码**: 在"股票代码"输入框中输入股票代码（如：000001.SZ）
2. **设置分析时间**: 选择开始日期和结束日期
3. **选择分析周期**: 选择要分析的时间周期
4. **开始分析**: 点击"开始分析"按钮
5. **查看结果**: 在不同标签页中查看分析结果

## 界面说明

### 控制面板
- **股票代码**: 输入要分析的股票代码
- **开始日期**: 分析的起始日期
- **结束日期**: 分析的结束日期
- **分析周期**: 选择分析的时间周期
- **开始分析**: 启动分析过程
- **清除结果**: 清除当前分析结果

### 结果显示区域

#### 1. 分析概览
- **基本信息**: 显示股票代码、分析时间范围等基本信息
- **分析摘要**: 显示结构统计、信号统计、操作建议等摘要信息

#### 2. 缠论结构
- **结构统计表**: 显示各时间周期的分型、笔、中枢数量统计

#### 3. 交易信号
- **信号列表**: 显示检测到的所有交易信号
- **信号详情**: 包括时间、类型、价格、强度、置信度、描述等

#### 4. 分析日志
- **实时日志**: 显示分析过程中的详细日志信息
- **错误信息**: 显示分析过程中的错误和警告

## 技术架构

### 架构设计
```
PyQt6 桌面GUI
    ↓ 直接调用
缠论分析引擎 (chan_theory/)
    ↓
MongoDB数据库
```

### 核心组件

1. **ChanAnalysisGUI**: 主窗口类，负责界面管理
2. **AnalysisWorker**: 分析工作线程，负责后台分析
3. **ChanTheoryEngine**: 缠论分析引擎，负责核心分析逻辑

### 线程模型
- **主线程**: 负责UI界面响应
- **工作线程**: 负责缠论分析计算，避免界面卡顿
- **信号机制**: 使用PyQt6信号槽机制进行线程间通信

## 优势特点

### 🚀 性能优势
- **本地化分析**: 无网络延迟，分析速度快
- **多线程处理**: 分析过程不阻塞界面操作
- **内存优化**: 合理的内存管理，支持大数据量分析

### 🎨 用户体验
- **直观界面**: 清晰的布局和操作流程
- **实时反馈**: 分析进度和状态实时显示
- **错误处理**: 友好的错误提示和恢复机制

### 🔧 技术优势
- **模块化设计**: 清晰的代码结构，易于维护
- **可扩展性**: 易于添加新功能和界面
- **跨平台**: 支持主流操作系统

## 故障排除

### 常见问题

1. **PyQt6安装失败**
   ```bash
   # 尝试升级pip
   pip install --upgrade pip
   
   # 重新安装PyQt6
   pip install PyQt6
   ```

2. **缠论模块导入失败**
   - 检查项目路径是否正确
   - 确保chan_theory目录存在
   - 检查Python路径设置

3. **数据库连接失败**
   - 检查MongoDB服务是否启动
   - 检查数据库连接配置
   - 确保有足够的数据进行分析

4. **分析结果为空**
   - 检查股票代码格式是否正确
   - 确认选择的时间范围内有数据
   - 查看分析日志了解详细错误信息

### 日志查看
- 应用内日志：查看"分析日志"标签页
- 控制台日志：在终端中查看详细输出
- 错误追踪：异常信息会显示在日志中

## 开发说明

### 代码结构
```
desktop_gui/
├── __init__.py          # 包初始化
├── main.py              # 主应用程序
└── (future components)  # 未来扩展组件

run_desktop_gui.py       # 启动脚本
```

### 扩展开发
- 添加新的分析功能：在AnalysisWorker中扩展
- 添加新的界面组件：在ChanAnalysisGUI中添加
- 添加新的可视化：可集成matplotlib等图表库

## 版本信息

- **当前版本**: 1.0.0
- **开发团队**: KK量化团队
- **技术栈**: Python + PyQt6 + 缠论分析引擎
- **许可证**: 项目内部使用

## 联系支持

如有问题或建议，请联系开发团队或查看项目文档。